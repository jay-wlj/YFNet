/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>

/* Header for class com_yunfan_net */

#ifndef _Included_com_yunfan_net
#define _Included_com_yunfan_net
#ifdef __cplusplus
extern "C" {
#endif

//错误码的定义
#define E_NET_TASK_FINISH				 1	//任务已经完成
#define E_NET_OK						 0	//成功
#define E_NET_FALSE						-1	//失败
#define E_NET_SEND_ERROR				-2	//发送请求失败
#define E_NET_RECV_ERROR				-3	//接收请求失败
#define E_NET_CON_ERROR					-4	//连接请求失败
#define E_NET_ERROR_PARA				-5	//参数初始化错误或者无效参数
#define E_NET_NO_FILE					-6	//文件不存在
#define E_NET_TIME_OUT					-7	//超时
#define E_NET_NO_DATA					-8	//未下载到数据
#define E_NET_DISK_NOT_ENOUGH			-9	//磁盘空间不足
#define E_NET_CREATE_TASK_FAILED		-10	//创建任务失败
#define E_NET_BUFFER_NOT_ENOUGH			-11	//传递进来的buffer空间大小不够
#define E_NET_NO_TASK_BY_HASH			-12 //没有hash对应的任务
#define E_NET_PATH_NOT_ACCESS			-13	//路径不可访问
#define E_NET_NO_INIT					-14	//网络模块还未初始化完
#define E_NET_GET_JAVA_METHOD_FAIL		-15	//获取java回调函数失败
#define E_NET_GET_JVM_FAIL				-16	//获取jvm失败
#define E_NET_BIND_LOCAL_HTTP_PORT_FAIL		-17 //绑定本地http代理端口失败


	/**************************************************************************************
	初始化云帆网络模块，程序运行的生命周期内只需要初始化一次，只有初始化成功后才能调用下面的
	接口
	strConfigPath	[IN]:云帆产生配置文件及任务信息文件的路径
	strCachePath	[IN]:缓存视频文件的路径
	iHttpPort		[IN]:本地http代理的端口号，创建任务和读取数据也可通过给本地端口发送http请求实现
						 GET http://vodipad.wasu.cn/201407021742/3cc51ccdac8e4d8ca896152a95415347/pcsan08/mams/vod/201404/24/20/20140424202708118c8104efd_dc5607f3.mp4 HTTP/1.1
						 Range: bytes=xxx-xxx
						 
	iMaxUseSpace	[IN]:视频可用磁盘空间大小，所有视频文件大小不能超过此值，超过则删除最旧的任务，0为不限大小，单位为MB	
	返回值				：见错误码
	***************************************************************************************/
#ifdef MONGOTV
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_Init
		(JNIEnv* env, jobject obj,jstring strConfigPath,jstring strCachePath,jint iHttpPort,jint iMaxUseSpace);
#else
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_Init
		(JNIEnv* env, jobject obj,jstring strConfigPath,jstring strCachePath,jstring strLogPath,jobject cls,jstring strMethod);
#endif

	/**************************************************************************************
	释放云帆网络模块
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_Clear
		(JNIEnv* env, jobject obj);

	/**************************************************************************************
	GetPrivateVersion		获取内部版本号
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_GetPrivateVersion
		(JNIEnv* env, jobject obj, jbyteArray version);

	/**************************************************************************************
	设置配置信息,详见配置信息接口文档
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_SetConfig
		(JNIEnv* env, jobject obj, jstring strJson);

	/**************************************************************************************
	开启或关闭p2p网络模块，在网络环境发生变化时调用，断开网络和连上网络
	status			[IN]:true为开启，false为关闭
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_SetNetworkStatus
		(JNIEnv* env, jobject obj, jboolean status);

	/**************************************************************************************
	创建播放任务
	strOrgUrl			[IN]  要创建任务的链接,可直接用来http下载文件的url，如：
						http://pcfastvideo.imgo.tv/6753cb9c1f89d1d74e4200fe9f4c678f/54a371da/c1/2014/dianying/yibuzhiyao/20141212bc7f0e67-8e8c-41cd-a14b-068372ddf83d.fhv
	strKeyUrl			[IN]  strSrcUrl中提取出来组成的固定url，如
						http://hunantv.com/c1/2014/dianying/yibuzhiyao/20141212bc7f0e67-8e8c-41cd-a14b-068372ddf83d.fhv
	strReferer			[IN]  湖南tv链接填hunantv.com
	hashArray			[OUT] strKeyurl对应的p2p hash值,40字节的字符串，创建任务后对任务的操作都以该值作为索引
	httpProxyUrl		[OUT] strKeyurl对应的播放代理地址,至少100字节的字符串，创建任务后用该代理地址播放
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_CreateTask
		(JNIEnv* env, jobject obj,jstring strOrgUrl,jstring strKeyUrl,jstring strReferer,jbyteArray hashArray,jbyteArray httpProxyUrl);

	/**************************************************************************************
	创建播放m3u8任务
	strOrgUrl			[IN]  要创建任务的链接,可直接用来http下载文件的url，如：
						http://pcfastvideo.imgo.tv/6753cb9c1f89d1d74e4200fe9f4c678f/54a371da/c1/2014/dianying/yibuzhiyao/20141212bc7f0e67-8e8c-41cd-a14b-068372ddf83d.fhv
	strKeyUrl			[IN]  strSrcUrl中提取出来组成的固定url，如
						http://hunantv.com/c1/2014/dianying/yibuzhiyao/20141212bc7f0e67-8e8c-41cd-a14b-068372ddf83d.fhv
	strReferer			[IN]  湖南tv链接填hunantv.com
	hashArray			[OUT] strKeyurl对应的p2p hash值,40字节的字符串，创建任务后对任务的操作都以该值作为索引
	httpProxyUrl		[OUT] strKeyurl对应的播放代理地址,至少100字节的字符串，创建任务后用该代理地址播放
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_CreateHlsTask( JNIEnv* env, jobject obj,jstring strOrgUrl,jstring strKeyUrl,
															jboolean bIsOtherCdn, jbyteArray hashArray, jbyteArray httpProxyUrl);

	/**************************************************************************************
	CreateUpdateTask	创建上传任务
	nType					[IN]  上传任务的类型 0:默认	1:耐飞文件上传
	pstrSrcUrl			[IN]  上传任务的url
	pstrfilepath		[IN]  上传的文件路径
	pstrHash			[OUT]  任务的p2p hash值，40字节的字符串，创建任务后对任务的操作都以该值作为索引
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_CreateUploadTask
		(JNIEnv* env, jobject obj, jint type, jstring strOrgUrl, jstring strFilePath, jbyteArray hashArray);

	/**************************************************************************************
	SetHeadValue	设置任务请求头信息
	pstrHash			[IN]  要设置的任务hash,在调用RunTask前设置
	pstHead				[IN]  请求head头
	pstrValue			[IN]  请求head的值
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_SetHeadValue
		(JNIEnv* env, jobject obj,jstring strHash, jstring strHead, jstring strValue);


	/**************************************************************************************
	删除任务
	strHash				[IN] 要删除的任务的hash
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_DeleteTask
		(JNIEnv* env, jobject obj,jstring strHash);

	/**************************************************************************************
	开启下载任务
	strHash				[IN] 要开启下载的任务的hash
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_RunTask
		(JNIEnv* env, jobject obj,jstring strHash);

	/**************************************************************************************
	暂停下载任务
	strHash				[IN] 要暂停下载的任务的hash
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_PauseTask
		(JNIEnv* env, jobject obj,jstring strHash);

	/**************************************************************************************
	设置任务的播放状态
	strHash				[IN] 要设置播放状态的任务hash
	bPlaying			[IN]] true:播放 false:未播放
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_SetTaskPlaying
		(JNIEnv* env, jobject obj,jstring strHash,jboolean bPlaying);
		
	/**************************************************************************************
	读取文件内容
	strHash				[IN]  要读取的文件hash
	dataArray			[OUT] 存储读取内容的空间,由调用者申请和释放
	start				[IN]  要读取的起始位置，单位byte
	len					[IN]  要读取的长度，单位byte
	readlen				[OUT] 实际读取的长度，单位byte
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_ReadFile
		(JNIEnv* env, jobject obj,jstring strHash,jbyteArray dataArray,jlong start,jint len,jintArray readlen);

	/**************************************************************************************
	设置视频任务缓存路径
	strCachePath		[IN]  缓存路径
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_SetCachePath
		(JNIEnv* env, jobject obj,jstring strCachePath);
	
	/**************************************************************************************
	设置广告任务的相关参数
	strAdCachePath		[IN]: 广告缓存路径
	iAdMaxUseSpace		[IN]: 广告可用磁盘空间大小，所有广告文件大小不能超过此值，超过则删除最旧的广告，0为不限大小，单位为MB
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_SetAdPara
		(JNIEnv* env, jobject obj,jstring strAdCachePath,jint iAdMaxUseSpace);

	/**************************************************************************************
	设置播放任务的当前播放位置，不使用本地代理方式创建任务和读取数据时，需要设置播放位置，用于
	调整云帆下载模式
	具体设置为：
	1、定时(1秒)设置；
	2、seek时立即设置；
	strHash				[IN]  要设置的任务hash
	pos					[IN]  要设置的位置，单位为byte
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_SetPlayingPos
		(JNIEnv* env, jobject obj,jstring strHash,jlong pos);

	/**************************************************************************************
	设置播放任务的当前播放位置，不使用本地代理方式创建任务和读取数据时，需要设置播放位置，用于
	调整云帆下载模式
	具体设置为：
	1、定时(1秒)设置；
	2、seek时立即设置；
	strHash				[IN]  要设置的任务hash
	pos					[IN]  要设置的位置，单位为byte
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_SetPlayingTimepoint
		(JNIEnv* env, jobject obj,jstring strHash,jint timepoint, jboolean bSeek, jintArray cachetime);

	/**************************************************************************************
	设置任务是否在播放状态
	strHash				[IN]  要设置的任务hash
	status:				[IN]  true为正在播放，false为停止播放
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_SetPlayingStatus
		(JNIEnv* env, jobject obj,jstring strHash,jboolean status);

	/**************************************************************************************
	设置可用磁盘空间大小，所有文件大小不能超过此值，程序启动后设置，0为不限大小
	space:				[IN] 视频可用空间，单位为MB
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_SetSpaceCanUse
		(JNIEnv* env, jobject obj,jint space);

	/**************************************************************************************
	设置回调java函数，用于通知java一些重要事件的发生
	cls					[IN] java函数所在的类对象
	strMethod			[IN] java函数的函数名
	strMethodPara		[IN] java函数的函数参数表，须为"(IILjava/lang/String;)V"
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_SetCallbackFunction(JNIEnv* env, jobject obj,jobject cls,jstring strMethod,
		jstring strMethodPara);

	/**************************************************************************************
	查询任务信息
	strHash				[IN]  要查询的任务hash
	info				[OUT] 保存任务信息，结构体如下
	public class TaskInfo
	{	
		public byte hash[] = new byte[40];	//任务的hash
		public long filelen;				//文件的大小，单位是Byte
		public long downloadlen;			//已下载的大小,单位是Byte
		public int downloadspeed;			//下载速度，字节/秒
		public int uploadspeed;				//上传速度，字节/秒
		public byte status;					//当前任务的状态，1:下载 2:暂停下载，若任务已下载完，则此状态无意义
		public String filepath;				//文件的存储路径
	}
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_QueryTaskInfo
		(JNIEnv* env, jobject obj,jstring strHash,jobject info);

	/**************************************************************************************
	查询任务是否下载/上传完成（耗时操作，避免频繁调用）
	 * @param strHash   [IN] 要查询的任务hash
	 * @param bFinish	[OUT]true:完成 false:未完成
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_TaskIsFinished
		(JNIEnv* env, jobject obj,jstring strHash,jbooleanArray bFinish);
		
	/**************************************************************************************
	设置上传开关
	status				[IN] true:允许上传；false:禁止上传
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_EnableUpload
		(JNIEnv* env, jobject obj,jboolean status);

	/**************************************************************************************
	设置p2p下载开关
	status				[IN] true:允许p2p下载；false:禁止p2p下载
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_EnableP2pDownload
		(JNIEnv* env, jobject obj,jboolean status);

	/**************************************************************************************
	设置任务为下载模式，该模式在任务下载完后会拷贝到指定存储路径
	strHash				[IN]  要设置的任务hash
	bOption				[IN]  true:下载模式；false:取消下载模式
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_SetTaskDownload
		(JNIEnv* env, jobject obj,jstring strHash,jboolean bOption);

	/***************************************************************************************	
	设置视频的时长
	strHash				[IN]  要设置的任务hash
	duration			[IN]  视频的时长，单位秒
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_SetVideoDuration
		(JNIEnv* env, jobject obj,jstring strHash,jint duration);

	/***************************************************************************************	
	清除缓存文件，正在离线的缓存文件不会被删
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_CleanCache
		(JNIEnv* env, jobject obj);

	/***************************************************************************************	
	更新下载链接，因为有些链接有时效性
	pstrHash			[IN]  要设置的任务hash
	pstrUrl				[IN]  http链接
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_UpdateHttpUrl
		(JNIEnv* env, jobject obj,jstring strHash,jstring strUrl);

	/***************************************************************************************	
	通知视频卡顿了，正在缓冲，结束缓冲
	pstrHash			[IN]  要设置的任务hash
	bBuffering			[IN]  bBuffering true:正在缓冲 false:结束缓冲
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_NotifyVideoBuffering
		(JNIEnv* env, jobject obj,jstring strHash,jboolean bBuffering);

	/**************************************************************************************
	GetTaskInfo			查询任务当前详细信息
	pstrHash			[IN]  要查询的文件hash
	pBuf				[IN]  是输入的缓冲区，以json格式填充
	iBufLen				[IN/OUT] json大小,当函数返回错误E_NET_BUFFER_NOT_ENOUGH时,
						表明pBuf的空间大小不够,此时的iBufLen等于需要的最小长度
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_GetTaskInfo
		(JNIEnv* env, jobject obj,jstring strHash,jbyteArray dataArray,jint len, jintArray readlen);

	/**************************************************************************************
	GetTaskInfo			获取所有正在下载缓存的任务
	pBuf				[IN]  是输入的缓冲区，以json格式填充
	iBufLen				[IN/OUT] json大小,当函数返回错误E_NET_BUFFER_NOT_ENOUGH时,
						表明pBuf的空间大小不够,此时的iBufLen等于需要的最小长度
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_GetDownloadingTaskLists
		(JNIEnv* env, jobject obj,jbyteArray dataArray, jintArray iBufLen);
	
	/***************************************************************************************	
	更新不同清晰度
	pstrHash			[IN]  要设置的任务hash
	pstrUrl				[IN]  http链接
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_UpdateClarityUrl
		(JNIEnv* env, jobject obj,jstring strHash,jstring strUrl, jstring strUrlKey, jint nClarity);
		
	/***************************************************************************************	
	设置当前设备类型
	type				[IN] 设备类型值，0为phone，1为pad
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_SetDeviceType
		(JNIEnv* env, jobject obj, jint type);

	/***************************************************************************************	
	设置当前限速模式
	limitMode				[IN] 限速模式(0:默认不限速 1:上网模式(自动模式) 2:观影模式 3:游戏模式)
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_SetLimitUploadSpeedMode
		(JNIEnv* env, jobject obj, jint mode);
		
	/***************************************************************************************	
	更新网络类型(网络状态变化后调用)
	limitMode				[IN] 限速模式(0:默认未知 1:wifi网络 2:4G网络)
	***************************************************************************************/
	JNIEXPORT jint JNICALL Java_com_yunfan_net_Yfnet_UpdateNetType
		(JNIEnv* env, jobject obj, jint mode);
#ifdef __cplusplus
}
#endif
#endif