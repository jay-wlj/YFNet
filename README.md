# YFNet

YFNet是一个跨平台的C++下载库，支持多任务下载及管理，支持文件下载及断点续传，hls播放推流，预存及码率无缝切换等功能


-------------------- 2017-11-13 18:00
V1.2.11.81
1、修正80版本dns解析耗时问题
2、优化不同网络切换情况下dns重新解析逻辑

-------------------- 2017-11-07 13:05
V1.2.10.80
1、下载库增加网络变化接口

-------------------- 2017-11-06 20:40
V1.2.10.79
1、下载库添加ipv6网络支持


-------------------- 2017-10-25 17:40
V1.2.10.78
1、修正对同一任务调用多次RunTask后返回-21(下载队列已满问题)
2、GetTaskInfo接口去掉download_url_length、current_url_length字段的统计上报
3、优化上层更新已离线任务url播放时不会更新m3u8

-------------------- 2017-10-11 15:50
V1.2.10.77
1、代码及日志优化
2、非离线保留第一个ts片，缩短重试出画面时间
3、线上dump GetTaskInfo问题修复

-------------------- 2017-9-18 11:40
V1.2.9.76
1、修复IOS推流完后不走清晰度切换逻辑问题

-------------------- 2017-9-15 11:50
V1.2.9.75
1、修复线上dump #432、#422、#404、#362、#350、#302
2、锁优化

-------------------- 2017-9-13 20:20
V1.2.9.74
1、修复缓存完成的视频重启APP后无法播放问题(上个72版本的问题)
2、socket超时重新解析其域名


-------------------- 2017-9-12 20:45
V1.2.9.72
1、下载库任务配置文件添加任务密钥字段信息,避免密钥丢失造成无法播放问题
2、下载逻辑优化

-------------------- 2017-8-24 11:30
V1.2.9.71
1、修复内存不足导致播放一直缓冲问题

-------------------- 2017-8-18 16:30
V1.2.9.70

1、解决频繁切换清晰度导致一直缓冲不播问题


-------------------- 2017-8-18 11:10
V1.2.9.69
1、还原非离线清晰度播放可以无缝切换到该已离线的清晰度，避免重新下载

-------------------- 2017-8-16 18:10
V1.2.9.67
1、非离线清晰度播放可以无缝切换到该已离线的清晰度，避免重新下载


-------------------- 2017-8-15 18:00
V1.2.9.66
1、添加无缝切换接口逻辑
2、修复GetTaskInfo接口返回空串问题

-------------------- 2017-8-10 16:00
V1.2.9.65
1、修复线上bugly #522  空间不足写入内存m3u8流异常问题

-------------------- 2017-7-27 17:20
V1.2.8.64
1、修复无网下调用RunTask概率卡死问题
2、修复线上dump
3、无网下日志优化

-------------------- 2017-7-18 19:00
V1.2.8.63
1、添加获取当前正在下载的任务Hash列表接口(RunTask离线任务返回E_NET_DOWNTASK_QUEUE_FULL时，调用此接口查询当前任务离线信息)
2、修改优化下载逻辑，确保具体请求连接资源信息能正确处理结束

-------------------- 2017-7-12 19:40
V1.2.7.62
1、修复了暂停删除任务没有删除并发请求的问题
2、修复日志异常大量打印问题

-------------------- 2017-7-12 18:15
V1.2.7.61
1、修复了暂停删除任务没有删除并发请求的问题


-------------------- 2017-7-5 22:10
V1.2.7.60
1、解决android下载99%卡住问题

-------------------- 2017-7-4 22:00
V1.2.7.59
1、修复android崩溃问题

-------------------- 2017-6-30 11:40
V1.2.7.58
1、修改下载逻辑，支持离线任务后台可配同时请求数(暂设为2),加快离线速度,缩短离线完成时间
2、优化代码，避免死锁访问资源

-------------------- 2017-6-22 15:00
V1.2.7.57
1、修改对签名校验失败的数据仅进行上报处理，不影响正常下载和播放
2、因签名大小有可能不对原因，对离线下载的任务文件不再进行合并处理


-------------------- 2017-6-12 18:00
V1.2.6.55
1、解决Android端相关crash(#1911 #2040 #2068 #2080 #1751 #2035)
2、相关代码加入异常捕获日志，避免因此导致的崩溃
3、增加代理推流发送缓冲区到1M大小

-------------------- 2017-6-5 15:20
V1.2.6.54
1、按照统计文档返回相应的统计信息



-------------------- 2017-5-26 10:30
V1.2.6.52

1、更新UpdateHttpOrgUrl后重新解析一次域名

2、修正播放中下载概率出现播放超时问题

3、提供接口查询指定任务下载详细状态信息

-------------------- 2017-5-18 18:30
V1.2.5.51
1、修正切换播放概率出现之前正在播放的任务被删掉问题


-------------------- 2017-5-15 17:30
V1.2.5.50
1、修正播放的离线到SD卡后拔出后一段时间再插入，继续下载没有速度导致超时的问题
2、修改播放SD卡上的任务文件大小为0导致超时问题

-------------------- 2017-5-13 21:00
V1.2.5.49
1、任务离线完成后，暂停任务
2、修改Android缓存路径更改问题

-------------------- 2017-5-12 15:15
V1.2.5.47
1、正在播放的任务url更新后，按请求的ts去除参数来查找，解决客户端没有更新播放引擎的url而播放结束的问题


-------------------- 2017-5-11 11:45
V1.2.5.46
1、修改离线任务的路径不可访问后没有回调(id=1,result=5)的问题
2、支持ts流投屏播放，移动端走之前的m3u8播放,投屏设备走ts流
3、修复IOS离线的mu3u8签名任务因存储的绝对路径导致重下问题

-------------------- 2017-5-9 11:15
V1.2.5.45
1、修改44版本BUG 
2、支持mp4离线及投屏播放
3、修复mp4下载完成没有回调上层的问题
4、对m3u8合并文件末尾部分数据异常问题修复

-------------------- 2017-5-3 17:50
V1.2.5.44
1、为Android提供缓存路径设置接口(已离线的文件仍在之前设置的路径下) 
2、修复Android线上版本网络库Crash(1、 #1125 SIGFPE 2、#1093 SIGSEGV(SEGV_ACCERR)) 

-------------------- 2017-4-18 16:40
V1.2.4.43
1、修正不是播放状态的任务不响应播放引擎的请求导致播放结束问题

-------------------- 2017-4-17 18:25
V1.2.4.42
1、修正离线下载(带签名大小及md5的m3u8)整合文件的一处Bug

-------------------- 2017-4-12 21:20
V1.2.4.41
1、客户端调用DeleteTask接口可不用调用SetTaskPlaying，否则必须调用该接口通知下载库更新该任务播放状态

-------------------- 2017-4-7 18:10
V1.2.4.40
1、修正下载过程中暂停任务概率卡死问题


-------------------- 2017-4-6 18:10
V1.2.4.39
1、添加阿里云ts签名大小及md5
2、所有请求头添加Refer字段

-------------------- 2017-3-29 17:30
V1.2.4.38
1、下载库请求ts片40x,50x信息不发送给播放引擎，方便客户端处理重试逻辑
2、修正请求重试超过三次才通知客户端

-------------------- 2017-3-24 18:25
V1.1.3.37
1、增加任务是否正在播放查询接口
2、增加任务加载日志信息



-------------------- 2017-3-15 15:40
V1.1.3.36
1、修改回调id=2(空间不足)时，传回当前任务hash
2、修正下载缓冲限制Bug

-------------------- 2017-3-13 20:50
V1.1.3.35
1、任务已存在时，调用CreateTask仍返回hash及playurl
2、播放结束调用SetTaskPlaying(hash,false)后，下载库会根据限制任务数判断是否暂停下载


-------------------- 2017-3-9 20:00
V1.1.3.34
1、查询任务信息接口添加Status=3(下载/上传完成)  
2、添加任务是否下载/上传完成接口(对于m3u8任务会校验所有ts片是否存在，耗时操作，避免频繁调用)

-------------------- 2017-3-3 15:00
V1.1.3.33
1、添加同时离线任务数的限制处理(播放任务不限制，播放任务需在RunTask之前调用SetTaskPlaying设置),接口示例:Yfnet->SetConfig("{\"data\":{"\"maxdowncount\":1}}")


-------------------- 2017-2-22 14:10
V1.1.3.32
1、添加NotifyVideoBuffering接口，通知网络库播放任务是否有缓冲 
2、添加多个离线任务同时存在播放任务时的限速下载处理
3、存储key文件添加版本当前加密key的版本信息


-------------------- 2017-2-17 15:50
V1.1.3.31
1、修复移动端离线任务下次读取离线文件失败的Bug
2、修复存储空间不足情况下点播任务失败问题

-------------------- 2017-2-16 20:45
V1.1.3.30
1、解决链接重定向后没有重新请求的问题

-------------------- 2017-2-10 20:45
V1.1.3.29
1、点播及离线的ts文件都进行aes ecb加密存储
2、离线没有ts分片大小时，离线存储所有的ts加密文件
3、修改离线及正常点播的之间切换的逻辑
4、修复点播mp4等非m3u8文件 android64位机器崩溃问题

-------------------- 2017-1-20 11:45
V1.1.3.28
1、修正多个任务同时下载不能同时播放的Bug
2、支持mp4等视频文件的直接下载点播
3、优化下载


-------------------- 2017-1-17 10:15
V1.1.3.27
1、添加耐飞文件上传支持
2、支持https下载及上传
3、添加离线下载支持，离线与非离线间可随意切换，离线的文件经aes_ecb加密保存
4、ios也改为动态库


-------------------- 2017-1-11 12:00
V1.1.2.26
1、修复重试引起的超时问题

-------------------- 2017-1-10 17:00
V1.1.2.25 
1、修复connect值错误判断导致一直重试问题

-------------------- 2017-1-6 15:00
V1.1.2.24 
1、修正m3u8thunked下载超时重试问题



-------------------- 2017-1-5 16:00
V1.1.2.23
1、修正播放缓存时长问题

-------------------- 2016-12-9 16:45
V1.1.2.22 
1、修正m3u8thunked下载超时重试问题
2、修正离线下载bug
